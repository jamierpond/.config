#!/bin/zsh
# Print the N most recently modified files from a directory

dir="."
num_files=10

# Parse arguments
while [[ $# -gt 0 ]]; do
  case $1 in
    -n)
      num_files="$2"
      shift 2
      ;;
    *)
      dir="$1"
      shift
      ;;
  esac
done

# Get absolute path of directory
abs_dir=$(cd "$dir" && pwd)

# List files with full paths, filtering out . and ..
ls -t "$dir" | grep -v '^\.\.$' | grep -v '^\.$' | head -n "$num_files" | while read -r file; do
  echo "$abs_dir/$file"
done
